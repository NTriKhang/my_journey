Context (carry-over):

Project: Japanese Learning Platform (personal)

Goal: practice microservice architecture & Clean Architecture

Tech: .NET (C#) backend, Next.js frontend

Core domains: LearningSession, Activity, Material, Artifact

Architecture style: Clean Architecture / DDD-inspired

Repositories live in Application, implementations in Infrastructure

Domain entities:

Do not touch repositories

Contain behavior + invariants only

Use MediatR in Application layer

Commands/Queries for use cases

INotification for domain events

Domain Events:

Raised in-memory by entities

Express “something meaningful happened”

Used to decouple reactions

Integration Events:

Stored via Outbox pattern

Published asynchronously

Must survive crashes

Rule:

If crash happens before commit → event loss is OK

If data is committed → event must be recoverable (Outbox)

Domain events ≠ Outbox events

Domain events = clarity & extensibility

Outbox = reliability

One domain event → many small handlers (not one big handler)

Handlers are resolved by event type (e.g. MediatR scans INotificationHandler<T>)